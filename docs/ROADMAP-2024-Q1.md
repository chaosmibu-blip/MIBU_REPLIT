# MIBU 重大更新計劃清單

> 建立時間：2024-01
> 狀態：規劃中

---

## 📋 更新起源

用戶提出 5 大功能需求：
1. 募資系統（抵消採集成本）
2. 成就系統（用戶參與）
3. 商家新增店家（確認存在）
4. 用戶協助採集（回報/建議/排除）
5. 帳號重構（移除訪客/多身份/推薦碼）

---

## ✅ 已完成決策

### 募資系統

| 項目 | 決定 |
|------|------|
| 募資單位 | 國家，進度條顯示金額+百分比 |
| 金流 | IAP（APP）+ Stripe（官網）雙渠道 |
| 獎勵 | 專屬成就（體驗機會未來做）|
| 進度同步 | 官網/APP 即時同步 |

### 成就系統

| 項目 | 決定 |
|------|------|
| 成就類型 | 五條線：參與者/投資者/推廣者/業務/策劃師 |
| 成就獎勵 | 勳章 + 優惠券 + 經驗值 |
| 設計原則 | 各角色都有專屬閃光點 |

### 推薦系統

| 項目 | 決定 |
|------|------|
| 推薦層級 | **單層**（不做多層次）|
| 推薦用戶 | 推薦碼 → 註冊成功 → 雙方獲經驗 |
| 推薦商家 | 填寫資料 → 審核通過 → 獲經驗 + 現金 |
| 商家自推 | 可以推薦自己 = 免費試用期 |
| 提現方案 | 初期人工匯款（兩週一次）→ 後期串接金流 |

### 用戶貢獻

| 項目 | 決定 |
|------|------|
| 貢獻類型 | 回報歇業、建議景點、排除低品質 |
| 排除機制 | 50 人/月→降權重、100 人/月→軟刪除 |
| 審核機制 | AI 預審 → 社群投票 → 人工 |

### 帳號重構

| 項目 | 決定 |
|------|------|
| 訪客處理 | 新用戶強制登入，舊用戶提示綁定 |
| 多身份 | 已有基礎（auth_identities）|
| 策劃師申請 | Lv.10 推送邀請 |

### 商家新增店家

| 項目 | 決定 |
|------|------|
| API 狀態 | 已存在 `POST /api/merchant/places/new` |
| 補充欄位 | 營業時間 |
| 選填欄位 | Google Place ID、經緯度、分類、描述 |

### 遊戲經濟系統

| 項目 | 決定 |
|------|------|
| 等級上限 | 99 等，**先開放 30 等** |
| 功能開放 | Lv.1 全開放（不鎖功能）|
| 里程碑 | 給榮耀 + 權益（頭框/稱號/抽卡/背包）|
| 策劃師邀請 | Lv.10 彈窗（儀式感）|
| 抽卡上限 | 24 → 36（+12）|
| 背包格數 | 20 → 30（+10）|
| 圖鑑功能 | 自動收錄 + 最愛⭐ + 黑名單🚫 |

---

## ✅ 已建立記憶庫

- [x] `docs/memory-economy-system.md` - 遊戲經濟系統
- [x] `docs/memory-crowdfund.md` - 全球地圖募資系統
- [x] `docs/memory-referral.md` - 推薦系統（用戶/商家/獎勵/提現）
- [x] `docs/memory-contribution.md` - 用戶貢獻（回報/建議/排除/審核）
- [x] `docs/memory-auth.md` - 帳號重構（移除訪客/多身份）✅ 已更新

---

## 🔧 開發階段

### Phase 0: 記憶庫與契約 ✅ 已完成
- [x] 建立 `memory-crowdfund.md`
- [x] 建立 `memory-referral.md`
- [x] 建立 `memory-contribution.md`
- [x] 更新 `memory-auth.md`
- [x] 更新 API 契約（COMMON/APP/WEB v1.1.0）

### Phase 1: 遊戲經濟基礎
- [ ] 等級定義資料表 + 初始資料
- [ ] 用戶等級資料表
- [ ] 經驗值交易記錄表
- [ ] 經驗值服務（事件驅動）
- [ ] 等級系統 API
- [ ] 成就定義資料表 + 初始資料
- [ ] 用戶成就資料表
- [ ] 成就觸發服務
- [ ] 成就 API

### Phase 2: 募資系統
- [ ] 募資活動資料表
- [ ] 募資貢獻資料表
- [ ] 募資 API
- [ ] IAP 整合（APP）
- [ ] Stripe 整合（官網）
- [ ] 進度同步機制
- [ ] 達標觸發採集

### Phase 3: 推薦系統
- [ ] 推薦碼資料表
- [ ] 推薦關係資料表
- [ ] 用戶餘額資料表（可提現金額）
- [ ] 推薦 API
- [ ] 推薦用戶流程
- [ ] 推薦商家流程
- [ ] 商家自推流程
- [ ] 提現申請 API（人工處理）

### Phase 4: 用戶貢獻
- [ ] 用戶貢獻資料表
- [ ] 回報歇業功能
- [ ] 建議景點功能
- [ ] 黑名單標記功能
- [ ] 黑名單統計 + 排除機制
- [ ] 審核流程（AI + 社群 + 人工）

### Phase 5: 帳號重構
- [ ] 移除訪客登入選項
- [ ] 舊訪客綁定提示
- [ ] 策劃師申請流程

### Phase 6: 商家新增店家
- [ ] 補充營業時間欄位

---

## 📄 待更新契約

- [ ] `contracts/APP.md` - 新增經濟/募資/推薦/貢獻 API
- [ ] `contracts/WEB.md` - 新增募資相關 API

---

## 🔄 三端同步

完成後需寫入：
- [ ] `sync-app.md` - APP 端實作指令
- [ ] `sync-web.md` - 官網端實作指令

---

## 核心設計原則

1. **文件/記憶庫優先** - 決策先記錄，再寫程式碼
2. **人類+AI 共同維護** - 程式碼要能被理解
3. **契約驅動** - 三端靠契約協作
4. **模組化** - 每個功能獨立模組
