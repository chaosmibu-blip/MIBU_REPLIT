我們要實作「商家認領」與「行程卡分流」系統。請基於現有的 Schema 進行擴充。
架構策略： 採用「草稿 (Draft)」與「正式 (Official)」分離的設計。
請修改 prisma/schema.prisma 加入以下模型：
code
Prisma
// --- 商家認領與草稿區 ---

enum ClaimStatus {
  PENDING
  APPROVED
  REJECTED
}

// 1. 商家認領申請
model MerchantClaim {
  id          Int         @id @default(autoincrement())
  merchantId  Int
  merchant    User        @relation(fields: [merchantId], references: [id])
  googlePlaceId String    // Google Maps 的唯一 ID
  placeName   String
  address     String?
  status      ClaimStatus @default(PENDING)
  
  // 關聯到草稿卡
  draftCard   DraftItineraryCard?
  createdAt   DateTime    @default(now())
}

// 2. 行程卡草稿 (AI生成 + 商家編輯)
model DraftItineraryCard {
  id          Int           @id @default(autoincrement())
  claimId     Int           @unique
  claim       MerchantClaim @relation(fields: [claimId], references: [id])
  
  // 卡片內容 (可編輯)
  title       String
  description String?       // AI 自動生成的文案
  imageUrl    String?
  category    String?       // e.g. "Food"
  
  // 優惠設定 (草稿)
  discountInfo String?      // e.g. "憑卡消費9折"
  
  updatedAt   DateTime      @updatedAt
}

// --- 正式資料庫 (圖鑑與扭蛋用) ---

// 3. 正式行程卡 (發布後唯讀，供扭蛋抽取)
model ItineraryCard {
  id          Int       @id @default(autoincrement())
  merchantId  Int       // 連結回商家，以便讀取最新優惠
  merchant    User      @relation(fields: [merchantId], references: [id])
  
  title       String
  description String
  imageUrl    String
  googlePlaceId String
  
  // 關聯
  gachaItems  GachaItem[]      // 這張卡可以被放入哪些扭蛋池
  collections UserCollection[] // 哪些用戶擁有這張卡
  
  isPublished Boolean   @default(true)
}

// 4. 優惠券設定 (動態關聯)
model CouponSetting {
  id          Int       @id @default(autoincrement())
  merchantId  Int
  merchant    User      @relation(fields: [merchantId], references: [id])
  
  title       String    // e.g. "免費小菜一份"
  description String?
  isActive    Boolean   @default(true)
  
  // 這張券綁定在哪張行程卡上? (通常是一對一或一對多)
  cardId      Int?
  card        ItineraryCard? @relation(fields: [cardId], references: [id])
}
請執行 Migration (npx prisma migrate dev --name add_merchant_flow) 並更新 Seed 資料。